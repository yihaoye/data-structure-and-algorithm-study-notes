# B/B+ Tree
[B Trees and B+ Trees. How they are useful in Databases](https://www.youtube.com/watch?v=aZjYr87r1b8)  

## 定义
一个 m 阶的 B 树是一个有以下属性的树：
* 每一个节点最多有 m 个子节点
* 每一个非叶子节点（除根节点）最少有 ⌈m/2⌉ 个子节点
* 如果根节点不是叶子节点，那么它至少有两个子节点
* 有 k 个子节点的非叶子节点拥有 k − 1 个键
* 所有的叶子节点都在同一层

另外，B/B+ 树是 bottom-up 构建的（往上一层添加新的根节点而不是普通的树那样往下一层添加新的子节点、但是会往同一层左/右添加新的节点）。  

## 为什么数据库用 B/B+树而不是平衡二叉树呢？
在内存比在磁盘的数据，查询效率快得多。如果树这种数据结构作为索引，那每查找一次数据就需要从磁盘中读取一个节点，也就是说的一个磁盘块，但是平衡二叉树可是每个节点只存储一个键值和数据的，如果是 B 树，可以存储更多的节点数据，树的高度也会降低，因此读取磁盘的次数就降下来，查询效率就快。  

## B 树 vs B+ 树
* B+ 树非叶子节点上是不存储数据的，仅存储键值，而 B 树节点中不仅存储键值，也会存储数据。innodb 中页的默认大小是 16KB，如果不存储数据，那么就会存储更多的键值，相应的树的阶数（节点的子节点树）就会更大，树就会更矮更胖，如此一来我们查找数据进行磁盘的 IO 次数有会再次减少，数据查询的效率也会更快。
* B+ 树索引的所有数据均存储在叶子节点，而且数据是按照顺序排列的，链表连着的。那么 B+ 树使得范围查找，排序查找，分组查找以及去重查找变得异常简单。

## B+ 树实现
* [B+树 原理](https://www.youtube.com/watch?v=49P_GDeMDRo&list=PLsEFMZUL5KsOqKHhxquVleVkM9LFLFSo0&index=1)
* [B+树 Java 代码实现以及测试](https://www.cnblogs.com/jing99/p/11741685.html)
  
## 参考资料
* [MySQL 索引 15 连问](https://mp.weixin.qq.com/s/IO4SIAKi1XBqfzTLMCVyKA)
