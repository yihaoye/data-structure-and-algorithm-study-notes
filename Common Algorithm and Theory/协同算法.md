## OT 协同算法
参考：https://www.cnblogs.com/WindrunnerMax/p/17035547.html  

重点在于操作 Operation 与转换 Transformation，简单来说，操作 Operation 指明了所有的操作必须原子化，例如在第 N 个位置插入了某个字符，在第 M 个位置删除了某个字符，类似于这样的所有的操作必须能够原子化地表示，转换 Transformation 指明了所有的操作必须要有转换的方案，例如我在第 N 个位置插入了字符，你在 N+2 个位置同时插入了字符，假设我的操作比较靠前，由于需要同步操作，那么在我本地执行你的 Operation 时就必须将其转换，插入的位置就必须增加我插入字符的长度  

Operational Transformation (OT) 协同算法的核心思想是将文档的每一次修改都看作是一个操作，然后将这些操作进行转换来合并，最终得到文档内容。OT 算法的目的是在尽可能保持用户意图的情况下，保持文档的最终一致性，举个例子，当 A 和 B 同时在文档的L处插入了不同的字符，那么谁插入的字符在前协同算法并不关心，其只需要尽可能地根据一定策略例如时间戳来判断究竟是谁的字符在前，但是最终计算出的结果即究竟谁的字符在前并不影响协同算法，其关心的重点在于经过协同算法将用户产生的 Op 调度之后，在每个人面前呈现的文档内容是绝对一致的，这就是保持文档的最终一致性。从功能的角度上说，协同算法保证的是在多人同时在线编辑的情况下，由于每个人提交的内容是不一样的，就需要通过协同算法的调度，使得每个用户最终都能看到一样的内容。  

在了解 OT 协同算法之前，我们也可以了解一下 OT 协同算法与 CRDT 协同算法的主要区别。首先 OT 与 CRDT 都提供了最终一致性，这也是协同编辑的最终目标，但是这两种方案达成这一目标的方式不一样：  
* OT 操作转换通过操作 Operation 转换 Transformation 来做到这一点，终端所进行的操作 O 通过网络传输，其他终端在收到操作 O 后需要进行转换 T，之后才可以应用到文档上，最基础的 OT 是通过转换索引位置以确保收敛。
* OT 通常必须要有中央服务器进行协同调度。
* OT 通过算法处理编辑冲突的问题，增加了时间复杂度。
* CRDT 无冲突复制数据类型则是通过数据结构来做到这一点，CRDT 有两种实现方式，基于状态的 CvRDT 收敛复制数据类型和基于操作的 CmRDT 可交换复制数据类型。CvRDT 是将各个副本进行合并，进行多少次合并或以何种顺序进行合并并不重要，所有副本都会收敛。CmRDT 则具有可交换的操作，因此无需转换操作即可正确应用这些操作。
* CRDT 更适合分布式系统，可以不需要中央服务器。
* CRDT 通过数据结构保证了编辑的无冲突，增加了空间复杂度。

## CRDT 协同算法
参考：https://www.cnblogs.com/WindrunnerMax/p/17114099.html
